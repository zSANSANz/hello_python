import requests
from bs4 import BeautifulSoup
import pandas as pd

url = "https://pintu.co.id/market"
headers = {
    "User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0 Safari/537.36"
}

resp = requests.get(url, headers=headers)
print("Status:", resp.status_code)
soup = BeautifulSoup(resp.text, "html.parser")

data = []
# coba cari elemen harga untuk beberapa crypto
rows = soup.select("div.table-row")  # contoh selector, harus disesuai inspect
for r in rows[:10]:
    try:
        name = r.select_one("div.table-row-asset") .get_text(strip=True)
    except:
        name = None
    try:
        price = r.select_one("div.table-row-price").get_text(strip=True)
    except:
        price = None

    if name and price:
        data.append({"asset": name, "price": price})

df = pd.DataFrame(data)
print(df)
df.to_csv("pintu_prices.csv", index=False, encoding="utf-8-sig")
